<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">

    

    

    <title>Redis基础数据类型和常用操作命令 | CRCMS</title>
    <meta name="author" content="simon">
    <meta name="keywords" content>
    <meta name="description" content="简述经常用的都是通过代码包装好的redis调用程式，时间有些常用命令又模糊了，故拿出来记录下。基础数据类型StringAdd|SetSET key value [EX seconds|PX milliseconds] [NX|XX] NX:相当于SETNX值不存在时增加，XX值存在覆盖MSET key value key value ... 一次设置多个值SETNX key value 原子性操作，当key不存在设置成功返回1，否则返回0STRLEN key 返回key的长度，不...">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    <link rel="alternate" href="/atom.xml" title="CRCMS" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.png">
    

    <style type="text/css">
    @font-face {
        font-family: 'icomoon';
        src: url("/fonts/icomoon.eot?q628ml");
        src: url("/fonts/icomoon.eot?q628ml#iefix") format('embedded-opentype'),
             url("/fonts/icomoon.ttf?q628ml") format('truetype'),
             url("/fonts/icomoon.woff?q628ml") format('woff'),
             url("/fonts/icomoon.svg?q628ml#icomoon") format('svg');
        font-weight: normal;
        font-style: normal;
    }
    </style>
    <link rel="stylesheet" href="/css/style.css">

    <!--[if lt IE 9]>
    <style type="text/css">
    .nav-inner {top:0;}
    .author-meta {position:static;top:0;}
    .search-form {height:36px;}
    </style>
    <script type="text/javascript" src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>

    <main class="app">
        <header id="header" class="header clearfix">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">CRCMS</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
            <a class="nav-item" href="/">
                <span class="nav-text">首页</span>
            </a>
        
            <a class="nav-item" href="/tags">
                <span class="nav-text">标签</span>
            </a>
        
            <a class="nav-item" href="/archives">
                <span class="nav-text">归档</span>
            </a>
        
            <a class="nav-item" href="/about">
                <span class="nav-text">关于</span>
            </a>
        
            <a class="nav-item" href="/reward">
                <span class="nav-text">支持</span>
            </a>
        
    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="http://blog.crcms.cn"></form>

        
        
        
        

        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简述"><span class="toc-number">1.</span> <span class="toc-text">简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基础数据类型"><span class="toc-number">2.</span> <span class="toc-text">基础数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#String"><span class="toc-number">2.1.</span> <span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Add-Set"><span class="toc-number">2.1.1.</span> <span class="toc-text">Add|Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get"><span class="toc-number">2.1.2.</span> <span class="toc-text">Get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Delete"><span class="toc-number">2.1.3.</span> <span class="toc-text">Delete</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List"><span class="toc-number">2.2.</span> <span class="toc-text">List</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Add-Set-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">Add|Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">Get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Delete-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">Delete</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hash"><span class="toc-number">2.3.</span> <span class="toc-text">Hash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Add-Set-2"><span class="toc-number">2.3.1.</span> <span class="toc-text">Add|Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-2"><span class="toc-number">2.3.2.</span> <span class="toc-text">Get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Delete-2"><span class="toc-number">2.3.3.</span> <span class="toc-text">Delete</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Set"><span class="toc-number">2.4.</span> <span class="toc-text">Set</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Add-Set-3"><span class="toc-number">2.4.1.</span> <span class="toc-text">Add|Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-3"><span class="toc-number">2.4.2.</span> <span class="toc-text">Get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Delete-3"><span class="toc-number">2.4.3.</span> <span class="toc-text">Delete</span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>

</header>

        <div id="content" class="content">
            <div id="wrapper" class="wrapper" style="max-width: 800px">
                <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            Redis基础数据类型和常用操作命令
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="http://blog.crcms.cn/2019/09/19/redis-basic-command/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-09-19T22:59:14.000Z" itemprop="datePublished">2019-09-20</time>
</a>

            

        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><p>经常用的都是通过代码包装好的<code>redis</code>调用程式，时间有些常用命令又模糊了，故拿出来记录下。</p>
<h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><h4 id="Add-Set"><a href="#Add-Set" class="headerlink" title="Add|Set"></a>Add|Set</h4><ul>
<li><code>SET key value [EX seconds|PX milliseconds] [NX|XX]</code> NX:相当于SETNX值不存在时增加，XX值存在覆盖</li>
<li><code>MSET key value key value ...</code> 一次设置多个值</li>
<li><code>SETNX key value</code> 原子性操作，当key不存在设置成功返回1，否则返回0</li>
<li><code>STRLEN key</code> 返回key的长度，不存在返回0，非string类型返回错误</li>
<li><code>APPEND key value</code> 在key的末尾追加字符串，返回字符串长度，原来的key不存在，则会增加（相当于SET）</li>
<li><code>SETRANGE key offset value</code> 替换字符串，从offset下标开始，替换strlen(value)位字符串</li>
</ul>
<h4 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h4><ul>
<li><code>EXISTS key ...</code> 判断key是否存在，返回存在key的个数，单个key不存在返回0</li>
<li><code>GET key</code> 获取key值</li>
<li><code>MGET key ...</code> 获取多个key的值</li>
</ul>
<h4 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h4><ul>
<li><code>DEL key ...</code> 删除指定key，成功返回删除个数</li>
</ul>
<blockquote>
<p><code>string</code>类型在redis中有三种存储方式</p>
<ul>
<li>int 64位有符号位整数</li>
<li>embstr 长度小于44个字节的字符串</li>
<li>raw 长度大于44个字节的字符串<br>其中raw效率相对最差，可以通过 <code>OBJECT ENCODING key</code>的命令来查看string的存储类型</li>
</ul>
</blockquote>
<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><h4 id="Add-Set-1"><a href="#Add-Set-1" class="headerlink" title="Add|Set"></a>Add|Set</h4><ul>
<li><code>LPUSH key value ...</code> 左侧写入返回总列表个数</li>
<li><code>RPUSH key value ...</code> 右侧写入返回总列表个数</li>
<li><code>LINSERT key [BEFORE|AFTER] item value</code> 从左侧开始，指定元素(item)前或后插入新元素，返回总列表个数</li>
<li><code>LSET key index</code> 覆盖或增加指定索引的值，返回OK，超过最大list范围则会报错</li>
</ul>
<h4 id="Get-1"><a href="#Get-1" class="headerlink" title="Get"></a>Get</h4><ul>
<li><code>LRANGE key start stop</code> 获取指定范围的list, <code>lrange key 0 -1</code> 标识获取整个list</li>
<li><code>LINDEX key index</code> 获取指定索引处的元素，不存在返回nil</li>
<li><code>LLEN key</code> 获取列表长度</li>
</ul>
<h4 id="Delete-1"><a href="#Delete-1" class="headerlink" title="Delete"></a>Delete</h4><ul>
<li><code>LPOP key</code> 左侧弹出，返回总列表个数，当list不存在时返回nil</li>
<li><code>RPOP key</code> 右侧弹出，返回总列表个数，当list不存在时返回nil</li>
<li><code>LTRIM key start stop</code> 删除指定区间外的元素，返回OK</li>
<li><code>BLPOP key</code> LPOP阻塞式方法</li>
<li><code>BRPOP key</code> RPOP阻塞式方法</li>
</ul>
<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><p>类似于<code>Go</code>中的<code>map</code>或<code>PHP</code>中的键值数组，用于存储字段的映射关系</p>
<h4 id="Add-Set-2"><a href="#Add-Set-2" class="headerlink" title="Add|Set"></a>Add|Set</h4><ul>
<li><code>HMSET key field value ...</code> 成功返回 <code>OK</code></li>
<li><code>HSET key field value ...</code> 增加field时返回新增field值的个数，覆盖时返回0(覆盖成功也是0)</li>
<li><code>HSETNX key field value</code> 当field不存在时增加成功返回1，如果field存则返回0,不可同时进行多个field操作</li>
</ul>
<h4 id="Get-2"><a href="#Get-2" class="headerlink" title="Get"></a>Get</h4><ul>
<li><code>HKEYS key</code> 返回当前hash中所有的field</li>
<li><code>HEXISTS key field</code> 判断当前key中是否存在field，存在返回1，否则返回0</li>
<li><code>HGETALL key</code> 返回当前Key的所有值，当HASH巨大的时候不适合使用此函数</li>
<li><code>HMGET key field ...</code> 返回当前key指定的field值</li>
<li><code>HSCAN key cursor [MATCH field] [COUNT number]</code> 通过指针移动来获取MATCH匹配的值，COUNT代表的是返回的元素个数，但即使设置了count也并不一定代表就返回count个元素，因此不可作为分页式数据</li>
<li><code>HLEN key</code> 获取Hash长度</li>
</ul>
<h4 id="Delete-2"><a href="#Delete-2" class="headerlink" title="Delete"></a>Delete</h4><ul>
<li><code>HDEL key field ...</code> 删除一个或多个field，当key全部删除后，key会被自动清除</li>
</ul>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><h4 id="Add-Set-3"><a href="#Add-Set-3" class="headerlink" title="Add|Set"></a>Add|Set</h4><ul>
<li><code>SADD key member ...</code> 添加集合元素，返回添加的的元素数量</li>
</ul>
<h4 id="Get-3"><a href="#Get-3" class="headerlink" title="Get"></a>Get</h4><ul>
<li><code>SISMEMBER key member</code> 判断是否存在于集合，0表示不存在1存在</li>
<li><code>SMEMBERS key</code> 返回集合所有元素</li>
<li><code>SSCAN key cursor [MATCH member] [COUNT number]</code> 通过指针移动来获取MATCH匹配的值，COUNT代表的是返回的元素个数，但即使设置了count也并不一定代表就返回count个元素，因此不可作为分页式数据</li>
<li><code>SRANDMEMBER key count</code> 随机返回指定count元素</li>
<li><code>SUNION key key ...</code> 集合并集，返回合并后的值</li>
<li><code>SUNIONSTORE storeKey key key ...</code> 并集，并存储至storeKey中，索引相同则覆盖，返回合并个数</li>
<li><code>SINTER</code> 集合交集，返回合交集值</li>
<li><code>SINTERSTORE storeKey key key ...</code> 交集，并存储至storeKey中</li>
<li><code>SDIFF</code> 集合差集，返回合差集值</li>
<li><code>SDIFFSTORE diffKey key key ...</code> 差集，并存储至diffKey中</li>
<li><code>SCARD key</code> 获取集合元素数量</li>
</ul>
<h4 id="Delete-3"><a href="#Delete-3" class="headerlink" title="Delete"></a>Delete</h4><ul>
<li><code>DEL key</code> 删除集合</li>
</ul>

        
    </section>
</article>



<a id="pagenext" href="/2019/08/27/go-lock/" class="article-next" title="Golang 锁的简单使用"><i class="icon-arrow-right"></i></a>


<a id="pageprev" href="/2019/09/29/go-ioc/" class="article-prev" title="Golang Ioc容器"><i class="icon-arrow-left"></i></a>



<div class="comments">
    <div id="comments"></div>
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
    new Gitalk({
        clientID: "e1cbbb8b52f5de53cbce",
        clientSecret: "494fa22a9ca1b8d0a148ec8410e33eb1b08922bb",
        repo: "crcms.github.io",
        owner: "crcms",
        admin: ["crcms"],
        id: "2019/09/19/redis-basic-command",
        distractionFreeMode: true,
        title: "Redis基础数据类型和常用操作命令",
        body: "http://blog.crcms.cn/2019/09/19/redis-basic-command/",
        labels: []
    }).render('comments');
    </script>
</div>


            </div>
        </div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>

    
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?2c09de12c175e88fd5cb35771db9e691";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    
</footer>

    </main>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }

            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    
        <script src="/js/scrollspy.min.js"></script>
        <script type="text/javascript">
        $(document.body).scrollspy({target: '#aside-inner'});

        $(window).on('resize', function() {
            var hw = $('#header').width();
            var ww = $('#wrapper').width();
            var space = ($(this).width() - hw - ww) / 2 / 2;

            var pageprev = $('#pageprev');
            var pagenext = $('#pagenext');
            var avg = (pageprev.width() + pagenext.width()) / 2

            if(space > avg) {
                var len = space - avg / 2;
                var styles = {position: 'fixed', top: '50%', marginTop: - (pageprev.width() + pagenext.width()) / 4}
                pageprev.css($.extend({left: hw + len}, styles));
                pagenext.css($.extend({right: len}, styles));
            } else {
                pageprev.removeAttr('style');
                pagenext.removeAttr('style');
            }
        }).trigger('resize');
        </script>
    

</body>
</html>
